#!/bin/sh

NEW=0
DIR=$(pwd)
NAME=3x2

set -- $(getopt -o nd:N: --long new,dir:,name:"$@")
while [ $# -gt 0 ]
do
    echo "1: $1"
    case "$1" in
        (-n|--new) NEW=1
                   ;;
        (-d|--dir) NEW=1
                   DIR=$2
                   shift
                   ;;
        (-N|--name) NEW=1
                    NAME=$2
                   shift
                    ;;
        (--) shift
             break
             ;;
        (*)  echo "$0: error - unrecognized option $1" 1>&2
             exit 1
             ;;
    esac
    shift
done

[ $NEW -eq 1 ] && tmux new-window -c $DIR -n $NAME

tmux split-window -c $DIR
tmux select-pane -t 1
tmux split-window -h -p 33 -c $DIR
tmux select-pane -t 1
tmux split-window -h -p 50 -c $DIR
tmux select-pane -t 4
tmux split-window -h -p 33 -c $DIR
tmux select-pane -t 4
tmux split-window -h -p 50 -c $DIR
tmux select-pane -t 1
